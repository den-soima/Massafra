@using PlantiT.Web.HeinekenMassafra

@section Styles
{
    @Styles.Render("~/Areas/PlantiT.Web.HeinekenMassafra.MES/Content/Styles/angular/angularBundle")
    @Styles.Render("~/Areas/PlantiT.Web.HeinekenMassafra.MES/Content/Styles/kendo/kendoBundle")
    @Styles.Render("~/Areas/PlantiT.Web.HeinekenMassafra.MES/Content/Styles/OPICalculationBundle")
}

@section Scripts
{

    @Scripts.Render("~/Areas/PlantiT.Web.HeinekenMassafra.MES/Content/Scripts/jQuery/jQueryBundle")
    @Scripts.Render("~/Areas/PlantiT.Web.HeinekenMassafra.MES/Content/Scripts/jQuery-ui/jQuery-uiBundle") 
    @Scripts.Render("~/Areas/PlantiT.Web.HeinekenMassafra.MES/Content/Scripts/angular/angularBundle")
    @Scripts.Render("~/Areas/PlantiT.Web.HeinekenMassafra.MES/Content/Scripts/kendo/kendoBundle")      
    @Scripts.Render("~/Areas/PlantiT.Web.HeinekenMassafra.MES/Content/Scripts/he/heBundle")         
    @Scripts.Render("~/Areas/PlantiT.Web.HeinekenMassafra.MES/Content/Scripts/jszip/jszipBundle")

                     
    @Scripts.Render("~/Areas/PlantiT.Web.HeinekenMassafra.MES/Content/Scripts/HelperBundle")    
    @Scripts.Render("~/Areas/PlantiT.Web.HeinekenMassafra.MES/Content/Scripts/OPICalculationBundle")
}

@{
  ViewBag.Title = @PLanguageTexts.TXT_OPICALCULATION;
}

<script type="text/javascript">
    kendo.culture("it");
  //var resizeViewContent = function () {
  //  // Passt nach jeder Änderung der Fenstergröße die Höhe des ViewContent an (weißer Hintergrund)
  //  var contentHeight = $("#MainContent").innerHeight() - ($("#viewHeadline").outerHeight() + $("#viewNavigation").outerHeight() + $("#comboScroll").outerHeight());
  //  $("#viewContent").css("height", contentHeight + "px");

  //  //var mainGridHeight = contentHeight - $("#comboScroll").innerHeight();
  //  //$("#mainGrid").css("height", mainGridHeight + "px");
  //}

  var resizeViewContent = function () {
    // Passt nach jeder Änderung der Fenstergröße die Höhe des ViewContent an (weißer Hintergrund)
    var contentHeight = $("#MainContent").innerHeight() - ($("#viewHeadline").outerHeight() + $("#viewNavigation").outerHeight());
    $("#viewContent").css("height", contentHeight + "px");
  }

  $(document).on("ready", resizeViewContent);
  $(window).on("resize", resizeViewContent);

  var decodeString = function (string) {
    return he.decode(string,
    {
      "strict": false
    });
  }


  app.service('txt', function () {
    return {
      TXT_OPICALCULATION: decodeString("@PLanguageTexts.TXT_OPICALCULATION"),
      TXT_INPUT_YEAR: decodeString("@PLanguageTexts.TXT_INPUT_YEAR"),
      TXT_YEAR: decodeString("@PLanguageTexts.TXT_YEAR"),
      TXT_WEEK: decodeString("@PLanguageTexts.TXT_WEEK"),
      TXT_WORKINGDAYS: decodeString("@PLanguageTexts.TXT_WORKINGDAYS"),

      TXT_PLANNEDBREWS: decodeString("@PLanguageTexts.TXT_PLANNEDBREWS"),
      TXT_PLANNEDDOWN: decodeString("@PLanguageTexts.TXT_PLANNEDDOWN"),
      TXT_NONA: decodeString("@PLanguageTexts.TXT_NONA"),
      TXT_EXT_LACK: decodeString("@PLanguageTexts.TXT_EXT_LACK"),
      TXT_EXT_STRIKE: decodeString("@PLanguageTexts.TXT_EXT_STRIKE"),
      TXT_NPS: decodeString("@PLanguageTexts.TXT_NPS"),
      TXT_NPS_M: decodeString("@PLanguageTexts.TXT_NPS_M"),
      TXT_MANNEDTIME: decodeString("@PLanguageTexts.TXT_MANNEDTIME"),
      TXT_PRODTIME: decodeString("@PLanguageTexts.TXT_PRODTIME"),
      TXT_EXTSTOP: decodeString("@PLanguageTexts.TXT_EXTSTOP"),
      TXT_AVAILABLETIME: decodeString("@PLanguageTexts.TXT_AVAILABLETIME"),
      TXT_BREWS_ACTUAL: decodeString("@PLanguageTexts.TXT_BREWS_ACTUAL"),
      TXT_BREWS_NOMINAL: decodeString("@PLanguageTexts.TXT_BREWS_NOMINAL"),
      TXT_OPI_MAX_T_WK: decodeString("@PLanguageTexts.TXT_OPI_MAX_T_WK"),
      TXT_OPI_MAX_T_MON: decodeString("@PLanguageTexts.TXT_OPI_MAX_T_MON"),
      TXT_EFFICIENCY_WK: decodeString("@PLanguageTexts.TXT_EFFICIENCY_WK"),
      TXT_EFFICIENCY_MON: decodeString("@PLanguageTexts.TXT_EFFICIENCY_MON"),
      TXT_EFFICACY_WK: decodeString("@PLanguageTexts.TXT_EFFICACY_WK"),
      TXT_EFFICACY_MON: decodeString("@PLanguageTexts.TXT_EFFICACY_MON"),
      TXT_OPI_WK: decodeString("@PLanguageTexts.TXT_OPI_WK"),
      TXT_OPI_MON: decodeString("@PLanguageTexts.TXT_OPI_MON"),
      TXT_EFFICIENCY_PROG: decodeString("@PLanguageTexts.TXT_EFFICIENCY_PROG"),
      TXT_EFFICACY_PROG: decodeString("@PLanguageTexts.TXT_EFFICACY_PROG"),
      TXT_OPI_PROG: decodeString("@PLanguageTexts.TXT_OPI_PROG"),
      TXT_NPS_A: decodeString("@PLanguageTexts.TXT_NPS_A"),
      TXT_REFRESH: decodeString("@PLanguageTexts.TXT_REFRESH"),
      TXT_GOTO_LASTWEEK: decodeString("@PLanguageTexts.TXT_GOTO_LASTWEEK"),
    };
  });

</script>

<script id="popup-editor" type="text/x-kendo-template">
  <table>
    <tr>
      <td>&nbsp;&nbsp;</td>
      <td>Week</td>
      <td>&nbsp;&nbsp;</td>
      
      <td>
        <input type="text" name="Week" data-bind="value:Week" readonly="readonly"/>
      </td>
    </tr>
    <tr>
      <td>&nbsp;&nbsp;</td>
      <td>@PLanguageTexts.TXT_WORKINGDAYS</td>
      <td>&nbsp;&nbsp;</td>
      <td>
        <input type="text" name="WorkingDays" data-type="number" data-bind="value:WorkingDays" data-role="numerictextbox" />
      </td>
    </tr>
    <tr>
      <td>&nbsp;&nbsp;</td>
      <td>@PLanguageTexts.TXT_PLANNEDBREWS</td>
      <td>&nbsp;&nbsp;</td>
      <td>
        <input type="text" name="PlannedBrews" data-type="number" data-bind="value:PlannedBrews" data-role="numerictextbox" />        
      </td>
    </tr>
    <tr>
      <td>&nbsp;&nbsp;</td>
      <td>@PLanguageTexts.TXT_PLANNEDDOWN</td>
      <td>&nbsp;&nbsp;</td>
      <td>
        <input type="text" name="PlannedDown" data-type="number" data-bind="value:PlannedDown" data-role="numerictextbox" />
      </td>
    </tr>
    <tr>
      <td>&nbsp;&nbsp;</td>
      <td>@PLanguageTexts.TXT_NONA</td>
      <td>&nbsp;&nbsp;</td>
      <td>
        <input type="text" name="Nona" data-type="number" data-bind="value:Nona" data-role="numerictextbox" />
      </td>
    </tr>
    <tr>
      <td>&nbsp;&nbsp;</td>
      <td>@PLanguageTexts.TXT_EXT_LACK</td>
      <td>&nbsp;&nbsp;</td>
      <td>
        <input type="text" name="ExtLack" data-type="number" data-bind="value:ExtLack" data-role="numerictextbox" />
      </td>
    </tr>
    <tr>
      <td>&nbsp;&nbsp;</td>
      <td>@PLanguageTexts.TXT_EXT_STRIKE</td>
      <td>&nbsp;&nbsp;</td>
      <td>
        <input type="text" name="ExtStrike" data-type="number" data-bind="value:ExtStrike" data-role="numerictextbox" />
      </td>
    </tr>
    <tr>
      <td>&nbsp;&nbsp;</td>
      <td>@PLanguageTexts.TXT_NPS</td>
      <td>&nbsp;&nbsp;</td>
      <td>
        <input type="text" name="NotPlannedStop" data-type="number" data-bind="value:NotPlannedStop" data-role="numerictextbox" />
      </td>
    </tr>
    <tr>
      <td>&nbsp;&nbsp;</td>
      <td>@PLanguageTexts.TXT_NPS_M</td>
      <td>&nbsp;&nbsp;</td>
      <td>
        <input type="text" name="NotPlannedStopMan" data-type="number" data-bind="value:NotPlannedStopMan" data-role="numerictextbox" />
      </td>
    </tr>
    
  </table>



</script>

                                     
<input type="hidden" id="gatewayPath" data-value="@ViewBag.GatewayPath" />
<input type="hidden" id="authenticationToken" data-value="@ViewBag.AuthenticationToken" />
<input type="hidden" id="authenticationType" data-value="@ViewBag.AuthenticationType" />


<section class="view">


  <div id="appKendoOPICalculation" ng-app="KendoOPICalculation">
    <div id="OPICalculationCtrl" ng-controller="OPICalculationCtrl" ng-init="OnInitOPICalculation()">


      <div id="viewHeadline" class="viewHeadline row">
        <h1 class="h1WhiteFont">@ViewBag.Title</h1>
      </div>

      <div id="viewNavigation" class="row">




        <table border="0" class="viewNavigation navigationBar">
          <tr>
            <td class="navigationBar-left">
              <table>
                <tr>
                  <td>&nbsp;&nbsp;</td>
                  <td>
                    @PLanguageTexts.TXT_INPUT_YEAR:<br />
                    <input kendo-date-picker="datePickerOPICalculation" k-ng-model="dOPICalculation" k-options="datePickerOPICalculation" />
                  </td>
                  <td>&nbsp;&nbsp;</td>
                  <td>
                    <br />
                    <div class="ngdialog-buttons mt">

                      <kendo-button class="cancel" ng-click="OnGridOPICalculationsRefresh()">@PLanguageTexts.TXT_REFRESH</kendo-button>
                    </div>
                  </td>
                  <td>&nbsp;&nbsp;</td>
                  <td>
                    <br />
                    <div class="ngdialog-buttons mt">
                      <kendo-button class="goto" ng-click="OnGridOPICalculationsGoto()">@PLanguageTexts.TXT_GOTO_LASTWEEK</kendo-button>
                    </div>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
        </table>




      </div>


      <div id="viewContent" class="viewContent row">
        <div kendo-grid="gridOPICalculations" k-options="gridOPICalculations" k-rebind="doRebind">
        </div>
      </div>
    </div>
  </div>

</section>